# Swirlds Base Sample

## Goal

A simple enough application that utilizes platform-base modules. This application serves as a testing environment for platform-base module behavior without the need for platform and services layers.

## Overview

This project consists of a simple inventory management application that provides a REST API to handle items, inventories, and operations. The application utilizes an Undertow HTTP server to listen to connections on the configured port and limited 3erd party dependencies.

![base-sample.drawio.png](.%2Fdoc%2Fbase-sample.drawio.png)
### Dependencies

The project makes use of the following modules:

- **swirlds-config**: Module for configuration management.
- **swirlds-metrics**: Module for reporting metrics.
- **swirlds-logging**: TODO: pending

The project makes use of the following 3erd party dependencies:
- **Undertow**: embedded application server.
- **jackson**: json serializing/deserializing.
- **guava**: parameters validation + immutable collections.
- **spot-bugs**: non-null checks.
- **log4j2**: to-be-replaced in the future for swirlds-logging.
- **log4j2-appender-nodep**: as loki appender.

Also requires the following tools
- **docker-compose**

### Features being showcased & under test

- **Logging**: Provides logging functionality to track application behavior and errors. Currently implemented using log4j
- **Metrics Reporting**: Offers metrics reporting capabilities to monitor application performance.
- **Configuration**: Supports configuration management for easy customization.

### Prometheus Integration

The application declares predefined metrics to consume in the Prometheus endpoint. By default, the application starts on port 8000, and metrics are exposed on port 8001.

## Docker Compose

The project provides a Docker Compose file that enables the following services:

- **Swagger UI**: A user-friendly interface for interacting with the REST API. Accessible on port 8080.
- **Prometheus Server**: Consumes metrics generated by the application. Running on port 9090.
- **Loki**: Provides log ingestion capabilities. Running on port 3100.
- **Grafana**: Provides visualization capabilities with a custom dashboard included. Running on port 3000.

## Usage

To run the application with gradle / docker-compose & intelliJ:
1. Build the application using `gradlew assemble`.
2. Run the application using `gradlew run` or hit play in [BaseSampleMain.java](src%2Fmain%2Fjava%2Fcom%2Fswirlds%2Fbase%2Fsample%2FBaseSampleMain.java) main method.
3. By default, embedded server will be running on port 8000.
4. Go to `./docker` folder and run `docker-compose up`
5. Access the Swagger UI for interacting with the REST API. The Swagger UI runs on `http://localhost:8080/`.
6. Monitor metrics using the Prometheus server running on `http://localhost:9090/`.
7. Access application's scrap endpoint for prometheus at port `http://localhost:9999/`.
8. Visualize metrics using Grafana on `http://localhost:3000/`. Anonymous access enabled. Go to explore/Main Dashboard.
9. Example http requests have been included in [http-requests](http-requests%2FItems.http).


## To Be Included

- Include swirlds-logging

## Contributors

- platform-base-team

## Additional Documentation
- [Configuration](./base/configuration/configuration.md)
- [Metrics](./base/metrics/metrics.md)

## License

Copyright Hedera Hashgraph, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

[https://www.apache.org/licenses/LICENSE-2.0](https://www.apache.org/licenses/LICENSE-2.0)

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
